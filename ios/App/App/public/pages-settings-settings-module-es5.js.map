{"version":3,"sources":["webpack:///src/app/pages/settings/settings-routing.module.ts","webpack:///src/app/pages/settings/settings.page.html","webpack:///src/app/pages/settings/settings.page.scss","webpack:///src/app/pages/settings/settings.page.ts","webpack:///src/app/pages/settings/settings.module.ts"],"names":["routes","path","component","SettingsPageRoutingModule","imports","forChild","exports","SettingsPage","authService","router","renderer","storage","http","form","val","isChecked","get","then","userID","buttonDisabled","loadInterests","recycling","water","pollution","energy","item","obj","func","recyclingInterest","waterInterest","pollutionInterest","energyInterest","post","JSON","stringify","subscribe","data","result","console","log","set","clear","logout","navigateByUrl","replaceUrl","event","detail","checked","setAttribute","document","body","selector","template","SettingsPageModule","forRoot","declarations"],"mappings":"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","file":"pages-settings-settings-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SettingsPage } from './settings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingsPageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-title>\\n      <div class=\\\"ion-text-wrap\\\">\\n        Settings\\n      </div>\\n    </ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu =\\\"main-menu\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n\\n\\n\\n  \\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <!-- <ion-item lines=\\\"full\\\">\\n      <ion-icon slot=\\\"start\\\" name=\\\"moon\\\"></ion-icon>\\n      <ion-label>\\n        Toggle Dark Theme\\n      </ion-label>\\n      <ion-toggle (ionChange)=\\\"onClick($event)\\\" slot=\\\"end\\\"></ion-toggle>\\n    </ion-item> -->\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label>\\n       Receive push notifications\\n      </ion-label>\\n      <ion-toggle (ionChange)=\\\"onClick($event)\\\" slot=\\\"end\\\"></ion-toggle>\\n    </ion-item>\\n\\n  </ion-list>\\n\\n\\n  <br>\\n  <ion-list>\\n    <ion-title>Manage my interests</ion-title>\\n    <ion-item *ngFor=\\\"let entry of form\\\">\\n      <ion-label>{{entry.val}}</ion-label>\\n      <ion-checkbox slot=\\\"end\\\" (ionChange)=\\\"boxChecked($event)\\\" [(ngModel)]=\\\"entry.isChecked\\\"></ion-checkbox>\\n    </ion-item>\\n    <ion-button aria-label=\\\"update interests\\\" [disabled]=\\\"buttonDisabled\\\" color=\\\"success\\\" expand=\\\"full\\\" (click)=\\\"updateUserInterests()\\\">Update Interests</ion-button>\\n  </ion-list>\\n  \\n\\n\\n\\n\\n\\n</ion-content>\\n\\n\\n<ion-footer class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    \\n    <ion-button aria-label=\\\"logout\\\" expand=\\\"full\\\" (click)=\\\"logout()\\\">Logout</ion-button>\\n  </ion-toolbar>\\n</ion-footer>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzZXR0aW5ncy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit, Renderer2 } from '@angular/core';\n\nimport { AuthenticationService } from '../../services/authentication.service';\nimport { Router, NavigationExtras  } from '@angular/router';\nimport { HttpClient, HttpHeaders} from '@angular/common/http';\n\nimport { Storage } from '@ionic/storage';\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n})\n\nexport class SettingsPage {\n\n  public form = [\n    { val: 'Recycling', isChecked: false },\n    { val: 'Water Conservation', isChecked: false },\n    { val: 'Pollution Prevention', isChecked: false },\n    { val: 'Energy', isChecked: false }\n  ];\n\n  userID: any;\n  recycling: any;\n  water: any;\n  pollution: any;\n  energy: any;\n\n  buttonDisabled: any;\n\n  constructor(private authService: AuthenticationService, private router: Router, private renderer: Renderer2, private storage: Storage, public http: HttpClient) { \n\n    storage.get('userID').then((val) => {\n      this.userID = val;\n    });\n\n    this.buttonDisabled = true;\n    this.loadInterests();\n  }\n\n  loadInterests(){\n    \n    this.storage.get('userRecyclingInterest').then((val) => {\n      this.recycling = val;\n\n      if(val == 0 || val == null){\n        this.form[0].isChecked = false;\n      }else{\n        this.form[0].isChecked = true;\n      }\n    });\n\n    this.storage.get('userWaterInterest').then((val) => {\n      this.water = val;\n\n      if(val == 0 || val == null){\n        this.form[1].isChecked = false;\n      }else{\n        this.form[1].isChecked = true;\n      }\n    });\n\n    this.storage.get('userPollutionInterest').then((val) => {\n      this.pollution = val;\n\n      if(val == 0 || val == null){\n        this.form[2].isChecked = false;\n      }else{\n        this.form[2].isChecked = true;\n      }\n    });\n\n    this.storage.get('userEnergyInterest').then((val) => {\n      this.energy = val;\n\n      if(val == 0 || val == null){\n        this.form[3].isChecked = false;\n      }else{\n        this.form[3].isChecked = true;\n      }\n    });\n\n    this.buttonDisabled = true;\n  }\n\n  boxChecked(item){\n    //check item.user and do stuff\n    // enables update user interests if a box has been altered\n    this.buttonDisabled = false;\n  }\n\n  updateUserInterests(){\n\n    if(this.form[0].isChecked){\n      this.recycling = 1;\n    }else{\n      \n      this.recycling = 0;\n    }\n\n    if(this.form[1].isChecked){\n      this.water = 1;\n    }else{\n      this.water = 0;\n    }\n\n    if(this.form[2].isChecked){\n      this.pollution = 1;\n    }else{\n      this.pollution = 0;\n    }\n\n    if(this.form[3].isChecked){\n      this.energy = 1;\n    }else{\n      this.energy = 0;\n    }\n\n   var obj = {func: \"edit_user_interests\", userID: this.userID, recyclingInterest: this.recycling, waterInterest: this.water, pollutionInterest: this.pollution, energyInterest: this.energy};\n\n    this.http.post(\"https://recycle.hpc.tcnj.edu/php/users-handler.php\", JSON.stringify(obj)).subscribe(data => {\n    \n        var result = data as any[];\n\n        if(result['missingInput']){\n          // output to user it succeeded and move to next page\n          console.log(\"missing Input\");\n\n        } else {\n          this.storage.set('userRecyclingInterest', this.recycling);\n          this.storage.set('userWaterInterest', this.water);\n          this.storage.set('userPollutionInterest', this.pollution);\n          this.storage.set('userEnergyInterest', this.energy);\n          this.buttonDisabled = true;\n\n        }\n    });\n\n  }\n\n\n  async logout() {\n    // clears local storage \n    this.storage.clear();\n    await this.authService.logout();\n    this.router.navigateByUrl('/', { replaceUrl: true });\n  }\n\n  onClick(event){\n    if(event.detail.checked){\n      this.renderer.setAttribute(document.body, 'color-theme', 'dark');\n    }\n    else{\n      this.renderer.setAttribute(document.body, 'color-theme', 'light');\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SettingsPageRoutingModule } from './settings-routing.module';\n\nimport { SettingsPage } from './settings.page';\nimport { IonicStorageModule } from '@ionic/storage';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IonicStorageModule.forRoot(),\n    SettingsPageRoutingModule\n  ],\n  declarations: [SettingsPage]\n})\nexport class SettingsPageModule {}\n\n\n"]}