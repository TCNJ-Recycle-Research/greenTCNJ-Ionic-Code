{"version":3,"sources":["./src/app/pages/qr-scanner/qr-scanner.page.html","./src/app/pages/qr-scanner/qr-scanner.module.ts","./node_modules/@capacitor-community/barcode-scanner/dist/esm/index.js","./node_modules/@capacitor-community/barcode-scanner/dist/esm/definitions.js","./src/app/pages/qr-scanner/qr-scanner-routing.module.ts","./src/app/pages/qr-scanner/qr-scanner.page.scss","./src/app/pages/qr-scanner/qr-scanner.page.ts"],"names":[],"mappings":"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","file":"pages-qr-scanner-qr-scanner-module-es2015.js","sourcesContent":["export default \"<ion-header [hidden]=\\\"scanActive\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu =\\\"main-menu\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      <div class=\\\"ion-text-wrap\\\">\\n        Attendance Scanner\\n      </div>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [style.--background]=\\\"scanActive ? '#00000000' : '#fff'\\\">\\n  <class [hidden]=\\\"scanActive\\\">\\n    <ion-item>\\n      <p>\\n        Here you can use your phone's camera to scan a GreenTCNJ QR code provided by an event organizer to let them know you attended. Make sure you give the app permissions to use your camera!\\n      </p>\\n    </ion-item>\\n    <ion-grid>\\n      <ion-row>\\n          <ion-col>\\n            <img alt=\\\"\\\" class=\\\"center\\\" src=\\\"../../assets/icon/qrscan.png\\\" vertical-align=\\\"middle\\\">\\n          </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n    <ion-row class = \\\"scanner-buttons\\\">\\n      <ion-col class=\\\"ion-no-padding\\\">\\n        <ion-button expand=\\\"full\\\" (click)=\\\"scanBarcode()\\\">\\n          <ion-icon name=\\\"scan\\\" slot=\\\"start\\\"></ion-icon>\\n          Start Scan\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </class>\\n\\n  <ion-row class = \\\"scanner-buttons\\\" [hidden]=\\\"!scanActive\\\">\\n    <ion-col class=\\\"ion-no-padding\\\">\\n      <ion-button expand=\\\"full\\\" (click)=\\\"destroy()\\\">\\n        Stop\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n</ion-content>\\n\\n<div class=\\\"scan-box\\\" [hidden]=\\\"!scanActive\\\">\\n</div>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { QrScannerPageRoutingModule } from './qr-scanner-routing.module';\n\nimport { QrScannerPage } from './qr-scanner.page';\n\nimport { IonicStorageModule } from '@ionic/storage';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IonicStorageModule.forRoot(),\n    QrScannerPageRoutingModule\n  ],\n  declarations: [QrScannerPage]\n})\nexport class QrScannerPageModule {}\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","export var SupportedFormat;\n(function (SupportedFormat) {\n    // 1D Product\n    SupportedFormat[\"UPC_A\"] = \"UPC_A\";\n    SupportedFormat[\"UPC_E\"] = \"UPC_E\";\n    SupportedFormat[\"UPC_EAN_EXTENSION\"] = \"UPC_EAN_EXTENSION\";\n    SupportedFormat[\"EAN_8\"] = \"EAN_8\";\n    SupportedFormat[\"EAN_13\"] = \"EAN_13\";\n    // 1D Industrial\n    SupportedFormat[\"CODE_39\"] = \"CODE_39\";\n    SupportedFormat[\"CODE_39_MOD_43\"] = \"CODE_39_MOD_43\";\n    SupportedFormat[\"CODE_93\"] = \"CODE_93\";\n    SupportedFormat[\"CODE_128\"] = \"CODE_128\";\n    SupportedFormat[\"CODABAR\"] = \"CODABAR\";\n    SupportedFormat[\"ITF\"] = \"ITF\";\n    SupportedFormat[\"ITF_14\"] = \"ITF_14\";\n    // 2D\n    SupportedFormat[\"AZTEC\"] = \"AZTEC\";\n    SupportedFormat[\"DATA_MATRIX\"] = \"DATA_MATRIX\";\n    SupportedFormat[\"MAXICODE\"] = \"MAXICODE\";\n    SupportedFormat[\"PDF_417\"] = \"PDF_417\";\n    SupportedFormat[\"QR_CODE\"] = \"QR_CODE\";\n    SupportedFormat[\"RSS_14\"] = \"RSS_14\";\n    SupportedFormat[\"RSS_EXPANDED\"] = \"RSS_EXPANDED\";\n})(SupportedFormat || (SupportedFormat = {}));\n//# sourceMappingURL=definitions.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { QrScannerPage } from './qr-scanner.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: QrScannerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class QrScannerPageRoutingModule {}\n","export default \"@charset \\\"UTF-8\\\";\\n.scanner-buttons {\\n  margin: 0px;\\n  position: absolute;\\n  bottom: 100px;\\n  width: 100vw;\\n  height: 50px;\\n  z-index: 11;\\n}\\n.scan-box {\\n  border: 2 px solid #fff;\\n  box-shadow: 0 0 0 100vmax rgba(0, 0, 0, 0.5);\\n  content: ‘’;\\n  display: block;\\n  left: 50%;\\n  height: 300px;\\n  position: absolute;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  width: 300px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3FyLXNjYW5uZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUFoQjtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7QUFFSjtBQUNBO0VBQ0ksdUJBQUE7RUFDQSw0Q0FBQTtFQUNBLFdBQUE7RUFDQSxjQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxnQ0FBQTtFQUNBLFlBQUE7QUFFSiIsImZpbGUiOiJxci1zY2FubmVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2FubmVyLWJ1dHRvbnMge1xuICAgIG1hcmdpbjogMHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IDEwMHB4O1xuICAgIHdpZHRoOiAxMDB2dztcbiAgICBoZWlnaHQ6IDUwcHg7XG4gICAgei1pbmRleDogMTE7XG59XG5cbi5zY2FuLWJveCB7XG4gICAgYm9yZGVyOiAyIHB4IHNvbGlkICNmZmY7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMTAwdm1heCByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgY29udGVudDog4oCY4oCZO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGxlZnQ6IDUwJTtcbiAgICBoZWlnaHQ6IDMwMHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICB3aWR0aDogMzAwcHg7XG59XG4iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { BarcodeScanner, SupportedFormat } from '@capacitor-community/barcode-scanner';\nimport { HttpClient} from '@angular/common/http';\nimport { Storage } from '@ionic/storage';\n//import { stat } from 'fs';\n\n\n@Component({\n  selector: 'app-qr-scanner',\n  templateUrl: './qr-scanner.page.html',\n  styleUrls: ['./qr-scanner.page.scss'],\n})\nexport class QrScannerPage {\n//implements OnInit {\n\n  // ngOnInit() {\n  // }\n\n  scannedData: any;\n  encodedData: '';\n  encodeData: any;\n  inputData: any;\n  usrID: any;\n\n  scanActive = false;\n\n  constructor(public http: HttpClient,  private storage: Storage) {\n    storage.get('userID').then((val) => {\n      this.usrID = val;\n    });\n    //this.scanBarcode();\n  }\n\n  prepare(){\n    BarcodeScanner.prepare();\n  }\n\n  destroy(){\n    BarcodeScanner.stopScan();\n    this.scanActive = false;\n  }\n\n  async grantPerms(){\n    const status = await BarcodeScanner.checkPermission({force: false});\n\n    if (status.granted){\n      //granted permission to use camera\n      return true;\n    }\n\n    if (status.denied) {\n      // the user denied permission for good\n      // redirect user to app settings if they want to grant it anyway\n      const c = confirm(\n        'If you want to grant permission for using your camera, enable it in the app settings.',\n      );\n      if (c) {\n        BarcodeScanner.openAppSettings();\n      }\n    }\n  \n    if (status.neverAsked) {\n      // user has not been requested this permission before\n      // it is advised to show the user some sort of prompt\n      // this way you will not waste your only chance to ask for the permission\n      const c = confirm(\n        'We need your permission to use your camera to be able to scan barcodes',\n      );\n      if (!c) {\n        return false;\n      }\n    }\n  \n    if (status.restricted || status.unknown) {\n      // ios only\n      // probably means the permission has been denied\n      return false;\n    }\n  \n    // user has not denied permission\n    // but the user also has not yet granted the permission\n    // so request it\n    const statusRequest = await BarcodeScanner.checkPermission({ force: true });\n  \n    if (statusRequest.granted) {\n      // the user did grant the permission now\n      return true;\n    }\n  \n    // user did not grant the permission, so he must have declined the request\n    return false;\n  }\n\n  async scanBarcode(){\n    if(this.grantPerms()){\n      this.scanActive = true;\n      const result = await BarcodeScanner.startScan({ targetedFormats: [SupportedFormat.QR_CODE] });\n      if (result.hasContent){\n        var obj = {func: \"add_participant\", eventID: result.content, userID: this.usrID, attendance: 1};\n        this.http.post(\"https://recycle.hpc.tcnj.edu/php/participants-handler.php\", JSON.stringify(obj)).subscribe(data => {\n          var response = data as any[];\n        });\n        if(confirm(\"Your code was read successfully! Did you want to scan again?\")){\n          this.scanBarcode();\n        }\n        else{\n          this.scanActive = false;\n        }\n      }\n      else {\n        console.log(\"Nothing read from QR Code\");\n        if(confirm(\"Sorry, nothing was read from that code! Try again?\")){\n          this.scanBarcode();\n        }\n        else{\n          this.scanActive = false;\n        }\n      }\n    }\n    else{\n      const c = confirm(\n        'If you want to grant permission for using your camera, enable it in the app settings.'\n      );\n      if (c){\n        BarcodeScanner.openAppSettings();\n      }\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}