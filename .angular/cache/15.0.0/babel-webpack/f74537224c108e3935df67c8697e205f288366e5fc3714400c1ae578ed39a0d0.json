{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@ionic/angular\";\nfunction WhatgoeswherePage_ion_list_16_ion_item_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-button\", 16);\n    i0.ɵɵlistener(\"click\", function WhatgoeswherePage_ion_list_16_ion_item_11_Template_ion_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.openDetailsWithState($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const material_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", material_r3.name, i0.ɵɵsanitizeHtml);\n    i0.ɵɵattribute(\"data-material-id\", material_r3.id);\n  }\n}\nfunction WhatgoeswherePage_ion_list_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-item\")(2, \"ion-thumbnail\", 1);\n    i0.ɵɵelement(3, \"img\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-label\", 3)(5, \"h1\")(6, \"strong\");\n    i0.ɵɵtext(7, \"What Goes Where?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(8, \" Ask Roscoe!\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"ion-searchbar\", 13);\n    i0.ɵɵlistener(\"ionInput\", function WhatgoeswherePage_ion_list_16_Template_ion_searchbar_ionInput_9_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.searchMaterials($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-list\", 14);\n    i0.ɵɵtemplate(11, WhatgoeswherePage_ion_list_16_ion_item_11_Template, 2, 2, \"ion-item\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.searchResults);\n  }\n}\nfunction WhatgoeswherePage_ion_list_17_ion_item_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-button\", 16);\n    i0.ɵɵlistener(\"click\", function WhatgoeswherePage_ion_list_17_ion_item_10_Template_ion_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.openDetailsWithState($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const material_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", material_r9.name, i0.ɵɵsanitizeHtml);\n    i0.ɵɵattribute(\"data-material-id\", material_r9.id);\n  }\n}\nfunction WhatgoeswherePage_ion_list_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-item\")(2, \"ion-thumbnail\", 1);\n    i0.ɵɵelement(3, \"img\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-label\", 3)(5, \"h1\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Top Materials\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(8, \"These are commonly searched items.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"ion-list\");\n    i0.ɵɵtemplate(10, WhatgoeswherePage_ion_list_17_ion_item_10_Template, 2, 2, \"ion-item\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.popMaterials);\n  }\n}\nconst _c0 = function () {\n  return [\"/suggestmaterial\"];\n};\nexport let WhatgoeswherePage = /*#__PURE__*/(() => {\n  class WhatgoeswherePage {\n    constructor(router, http) {\n      this.router = router;\n      this.http = http;\n      this.materialsBackup = {};\n      this.materials = [];\n      this.searchResults = [];\n      this.popMaterials = [];\n      this.getAllMaterials();\n      this.popularMaterials();\n      this.type = 'all';\n    }\n    getAllMaterials() {\n      if (this.materials.length > 0) {\n        this.searchResults = this.materials;\n      } else {\n        var obj = {\n          func: \"get_all_materials\"\n        };\n        this.http.post(\"https://recycle.hpc.tcnj.edu/php/materials-handler.php\", JSON.stringify(obj)).subscribe(data => {\n          var result = data;\n          for (var i = 0; i < result.length; i++) {\n            this.materials.push({\n              id: result[i][\"materialID\"],\n              name: result[i][\"materialName\"],\n              type: result[i][\"materialType\"]\n            });\n            this.materialsBackup[result[i][\"materialID\"]] = result[i];\n          }\n          this.searchResults = this.materials;\n        });\n      }\n    }\n    popularMaterials() {\n      var obj = {\n        func: \"get_material_stats\"\n      };\n      this.http.post(\"https://recycle.hpc.tcnj.edu/php/graphs-handler.php\", JSON.stringify(obj)).subscribe(data => {\n        var result = data;\n        // want the top 6 materials to be displayed\n        for (var i = 0; i < 6; i++) {\n          this.popMaterials.push({\n            name: result[\"topMaterials\"][i][\"materialName\"],\n            id: result[\"topMaterials\"][i][\"materialID\"]\n          });\n        }\n      });\n    }\n    searchMaterials(ev) {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.searchResults = this.materials;\n        const searchString = ev.target.value;\n        if (!searchString) {\n          return;\n        }\n        this.searchResults = this.searchResults.filter(currMaterial => {\n          return currMaterial.name.toLowerCase().indexOf(searchString.toLowerCase()) > -1 || currMaterial.type.toLowerCase().indexOf(searchString.toLowerCase()) > -1;\n        });\n      });\n    }\n    // this function is to send the material ID to the materials-specs page \n    openDetailsWithState(ev) {\n      let navigationExtras = {\n        state: {\n          searchResults: this.materialsBackup[ev.target.getAttribute('data-material-id').toString()]\n        }\n      };\n      this.router.navigate(['/material-specs'], navigationExtras);\n    }\n  }\n  WhatgoeswherePage.ɵfac = function WhatgoeswherePage_Factory(t) {\n    return new (t || WhatgoeswherePage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient));\n  };\n  WhatgoeswherePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WhatgoeswherePage,\n    selectors: [[\"app-whatgoeswhere\"]],\n    decls: 25,\n    vars: 6,\n    consts: [[\"mode\", \"ios\"], [\"slot\", \"start\"], [\"menu\", \"main-menu\"], [1, \"ion-text-wrap\"], [\"color\", \"primary\", \"scrollable\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"all\", \"checked\", \"\"], [\"value\", \"popular\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"ion-no-border\", \"padding-vertical\"], [1, \"ion-padding-top\"], [\"color\", \"primary\", \"expand\", \"block\", \"size\", \"medium\", 3, \"routerLink\"], [\"alt\", \"\", \"src\", \"../../assets/RecyclingRoscoeSquare.png\"], [\"animated\", \"\", 3, \"ionInput\"], [\"id\", \"search-results\"], [4, \"ngFor\", \"ngForOf\"], [\"aria-label\", \"material.name\", \"color\", \"success\", \"size\", \"medium\", 3, \"innerHTML\", \"click\"]],\n    template: function WhatgoeswherePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-buttons\", 1);\n        i0.ɵɵelement(3, \"ion-menu-button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-title\")(5, \"div\", 3);\n        i0.ɵɵtext(6, \" What Goes Where? \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(7, \"ion-content\")(8, \"ion-segment\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function WhatgoeswherePage_Template_ion_segment_ngModelChange_8_listener($event) {\n          return ctx.type = $event;\n        });\n        i0.ɵɵelementStart(9, \"ion-segment-button\", 5)(10, \"ion-label\");\n        i0.ɵɵtext(11, \"All Items\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"ion-segment-button\", 6)(13, \"ion-label\");\n        i0.ɵɵtext(14, \"Popular Searches\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 7);\n        i0.ɵɵtemplate(16, WhatgoeswherePage_ion_list_16_Template, 12, 1, \"ion-list\", 8);\n        i0.ɵɵtemplate(17, WhatgoeswherePage_ion_list_17_Template, 11, 1, \"ion-list\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"ion-footer\", 9)(19, \"ion-toolbar\")(20, \"ion-item\")(21, \"ion-text\", 10);\n        i0.ɵɵtext(22, \"Looking for a material that is not on our list? \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"ion-button\", 11);\n        i0.ɵɵtext(24, \"Suggest a material\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.type);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngSwitch\", ctx.type);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"all\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"popular\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0));\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgSwitch, i3.NgSwitchCase, i4.NgControlStatus, i4.NgModel, i5.IonButton, i5.IonButtons, i5.IonContent, i5.IonFooter, i5.IonHeader, i5.IonItem, i5.IonLabel, i5.IonList, i5.IonMenuButton, i5.IonSearchbar, i5.IonSegment, i5.IonSegmentButton, i5.IonText, i5.IonThumbnail, i5.IonTitle, i5.IonToolbar, i5.SelectValueAccessor, i5.TextValueAccessor, i5.RouterLinkDelegate, i1.RouterLink],\n    styles: [\".block[_ngcontent-%COMP%]{display:block;width:100%;border:none;background-color:#4caf50;padding:14px 28px;font-size:16px;cursor:pointer;text-align:center}.list-title[_ngcontent-%COMP%]{text-overflow:unset;white-space:unset}.button[_ngcontent-%COMP%]{--vertical-align: middle;--padding-start: 10px;--padding-end: 10px}.buttonSize[_ngcontent-%COMP%]{margin-left:25%;width:50%;height:50%}\"]\n  });\n  return WhatgoeswherePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}