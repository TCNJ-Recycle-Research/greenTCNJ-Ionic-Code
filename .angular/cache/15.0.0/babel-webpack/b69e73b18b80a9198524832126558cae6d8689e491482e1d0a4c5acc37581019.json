{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, Inject, LOCALE_ID } from '@angular/core';\nimport { IonicStorageModule } from '@ionic/storage';\nimport { NgModule } from '@angular/core';\nlet HomePage = class HomePage {\n  constructor(userService, menuCtrl, locale, router, http, storage) {\n    this.userService = userService;\n    this.menuCtrl = menuCtrl;\n    this.locale = locale;\n    this.router = router;\n    this.http = http;\n    this.storage = storage;\n    this.today = new Date(Date.now());\n    this.events = [];\n    this.loadMyEvents();\n    this.menuCtrl.enable(true);\n    this.user = this.userService;\n    storage.get('userID').then(val => {\n      //updates user last login\n      var obj = {\n        func: \"update_last_login\",\n        userID: val\n      };\n      this.http.post(\"https://recycle.hpc.tcnj.edu/php/users-handler.php\", JSON.stringify(obj)).subscribe(data => {});\n    });\n    storage.get('userName').then(val => {\n      this.welcomeMsg = \"Welcome to Green TCNJ \" + val + \"!\";\n    });\n  }\n  loadMyEvents() {\n    this.storage.get('userID').then(val => {\n      var obj = {\n        func: \"get_my_events\",\n        userID: val\n      };\n      this.http.post(\"https://recycle.hpc.tcnj.edu/php/events-handler.php\", JSON.stringify(obj)).subscribe(data => {\n        var result = data;\n        for (var i = 0; i < result.length; i++) {\n          // turns the event date into a date format\n          var tempDate = new Date(result[i][\"eventDate\"]);\n          // for loop to show any events if they are scheduled for today\n          if (tempDate.getMonth() + 1 == this.today.getMonth() + 1 && tempDate.getDate() + 1 == this.today.getDate() && tempDate.getFullYear() == this.today.getFullYear()) {\n            this.events.push({\n              name: result[i][\"eventName\"],\n              description: result[i][\"eventDescription\"],\n              date: result[i][\"eventDate\"]\n            });\n          }\n        }\n        if (this.events.length == 0) {\n          this.events.push({\n            name: \"No events listed for you today.\",\n            description: \" \",\n            date: \" \"\n          });\n        }\n      });\n    });\n  }\n  // simple function to link search bar to next page when clicked \n  onClick(ev) {\n    this.router.navigate(['/whatgoeswhere']);\n  }\n};\nHomePage = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss']\n}), NgModule({\n  imports: [IonicStorageModule.forRoot()]\n}), __param(2, Inject(LOCALE_ID))], HomePage);\nexport { HomePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}